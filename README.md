# Project Context: Quantitative Automated Trading web(繁體中文版)一、 數據管理中心 (QuoteManager 層級)
多週期數據清洗：同步處理 Tick、1分、5分、15分、日線數據。

斷線自動補洞：偵測行情中斷，連線後自動向 API 請求缺失的歷史 K 線，確保 AI 分析不中斷。

自定義因子計算：內建技術指標 (MA, RSI, ATR) 與 AI 提取的特徵因子。

二、 策略開發與編譯 (PowerLanguage 層級)
Web 動態編譯 (Hot-Reload)：在 Web 介面設有代碼編輯區，修改 Python 策略後點選「編譯」，系統不需重啟即可在記憶體中更新邏輯，實時套用於實盤。

插件式架構：支援「一鍵增加新策略」。您可以隨時擴充第四個、第五個模式。

三、 三大 AI 獨立模式與部位加總 (Portfolio Trader 層級)
模式 A/B/C 獨立開關：每個模式具備獨立的權益曲線計算、進出場訊號。

部位加總器 (Aggregator)：計算三個模式的期望總口數，與 unitradeAPI 實盤自動對齊。

部位同步 (Position Auto-Sync)：每分鐘校對實盤倉位，發現誤差自動下校正單（對標 MC 的自動部位調整）。

四、 深度回測與分析系統 (Backtesting & Analysis)
高擬真回測引擎：

精細成本設定：每筆回測必須扣除手續費、期交稅。

滑點模擬 (Slippage)：可設定每個 Tick 的滑點損失，真實還原交易現場。

績效報告表：產出包含 勝率、獲利因子、最大回撤 (MDD)、連虧次數、夏普比率 的專業報表。

回測視覺化：在 Web 介面顯示回測後的資金曲線圖。

五、 最佳化引擎 (Optimization 層級)
遺傳演算法 (Genetic Algorithm)：由 AI (Gemini) 執行參數尋優，自動找出過去 30 天內表現最好的參數組合（如 MA 長度、止損點數）。

樣本外測試 (Walk-Forward)：自動分割數據，確保找到的參數在未來是有用的，而非過度擬合。

六、 AI 決策流水線 (AI Decision Pipeline)
分析頻率：每 5 分鐘 觸發一次（由 Llama-405B 總指揮）。

五階段分工：

Groq (快看行情) ➔ GPT-4o (新聞情緒) ➔ Gemini (回測與風控分析) ➔ Llama-405B (最終決策下單)。

七、 Web 介面與自動化部署 (Ops & UI)
全功能控制台：包含 模式開關、策略編輯器、回測啟動鈕、績效報表、成交日誌。

> Generated by Pro Prototype on 2025-12-29T06:57:22.885Z

## Overview
This is a functional high-fidelity prototype consisting of 10 interconnected screens. The code is built with HTML5 and Tailwind CSS.

## Navigation Logic (IMPORTANT)
- Navigation is NOT handled via standard `<a href>` tags.
- It uses a declarative attribute: `data-goto="TARGET_PAGE_ID"`.
- A JavaScript shim handles click events on these elements and redirects to `{PAGE_ID}.html`.
- When extending this project, maintain this pattern or refactor all `data-goto` attributes to standard links.

## Screen Topology

### [p1] 量化交易總控台 (Main Dashboard)
- **Filename**: `p1.html`
- **Description**: 系統核心入口，即時顯示三大 AI 模式 (A/B/C) 的運行狀態、權益曲線圖、當前總部位口數與 unitradeAPI 連線狀態。提供一鍵啟動/停止按鈕，並整合實時成交日誌與警示通知。
- **Outgoing Connections**:
  - links to -> `p1` (量化交易總控台 (Main Dashboard))
  - links to -> `p2` (數據管理中心 (QuoteManager))
  - links to -> `p3` (策略開發與熱編譯 (Strategy Editor))
  - links to -> `p4` (部位加總與同步 (Portfolio Aggregator))
  - links to -> `p5` (高擬真回測引擎 (Backtesting Engine))
  - links to -> `p6` (績效分析報告 (Performance Report))
  - links to -> `p7` (最佳化引擎與樣本外測試 (Optimization Lab))
  - links to -> `p8` (AI 決策流水線監控 (AI Decision Pipeline))
  - links to -> `p9` (系統設定與 API 配置 (System Settings))

### [p2] 數據管理中心 (QuoteManager)
- **Filename**: `p2.html`
- **Description**: 管理多週期數據清洗進度（Tick至日線）。包含「斷線自動補洞」狀態監控、歷史 K 線請求歷史，以及自定義技術指標與 AI 特徵因子的即時計算數值表。
- **Outgoing Connections**:
  - links to -> `p1` (量化交易總控台 (Main Dashboard))
  - links to -> `p2` (數據管理中心 (QuoteManager))
  - links to -> `p3` (策略開發與熱編譯 (Strategy Editor))
  - links to -> `p4` (部位加總與同步 (Portfolio Aggregator))
  - links to -> `p5` (高擬真回測引擎 (Backtesting Engine))
  - links to -> `p8` (AI 決策流水線監控 (AI Decision Pipeline))
  - links to -> `p9` (系統設定與 API 配置 (System Settings))

### [p3] 策略開發與熱編譯 (Strategy Editor)
- **Filename**: `p3.html`
- **Description**: 內建 Python 代碼編輯器，支援插件式架構管理。具備「Web 動態編譯 (Hot-Reload)」按鈕，允許開發者在不關閉系統的情況下，修改邏輯後直接更新至生產環境。
- **Outgoing Connections**:
  - links to -> `p1` (量化交易總控台 (Main Dashboard))
  - links to -> `p2` (數據管理中心 (QuoteManager))
  - links to -> `p3` (策略開發與熱編譯 (Strategy Editor))
  - links to -> `p4` (部位加總與同步 (Portfolio Aggregator))
  - links to -> `p5` (高擬真回測引擎 (Backtesting Engine))
  - links to -> `p6` (績效分析報告 (Performance Report))
  - links to -> `p8` (AI 決策流水線監控 (AI Decision Pipeline))
  - links to -> `p9` (系統設定與 API 配置 (System Settings))

### [p4] 部位加總與同步 (Portfolio Aggregator)
- **Filename**: `p4.html`
- **Description**: 計算三個獨立模式的期望總口數，並與實盤進行「每分鐘自動校對 (Position Auto-Sync)」。若發現誤差，系統將在此顯示校正單觸發記錄，確保與 MC 自動調整功能對標。
- **Outgoing Connections**:
  - links to -> `p1` (量化交易總控台 (Main Dashboard))
  - links to -> `p2` (數據管理中心 (QuoteManager))
  - links to -> `p3` (策略開發與熱編譯 (Strategy Editor))
  - links to -> `p4` (部位加總與同步 (Portfolio Aggregator))
  - links to -> `p5` (高擬真回測引擎 (Backtesting Engine))
  - links to -> `p6` (績效分析報告 (Performance Report))
  - links to -> `p7` (最佳化引擎與樣本外測試 (Optimization Lab))
  - links to -> `p8` (AI 決策流水線監控 (AI Decision Pipeline))
  - links to -> `p9` (系統設定與 API 配置 (System Settings))

### [p5] 高擬真回測引擎 (Backtesting Engine)
- **Filename**: `p5.html`
- **Description**: 設定回測參數，包含精細的手續費、期交稅以及 Tick 級別的滑點 (Slippage) 模擬。使用者可選擇歷史區間進行深度回測測試，並觸發回測任務。
- **Outgoing Connections**:
  - links to -> `p1` (量化交易總控台 (Main Dashboard))
  - links to -> `p3` (策略開發與熱編譯 (Strategy Editor))
  - links to -> `p5` (高擬真回測引擎 (Backtesting Engine))
  - links to -> `p6` (績效分析報告 (Performance Report))
  - links to -> `p7` (最佳化引擎與樣本外測試 (Optimization Lab))
  - links to -> `p9` (系統設定與 API 配置 (System Settings))
  - links to -> `p2` (數據管理中心 (QuoteManager))

### [p6] 績效分析報告 (Performance Report)
- **Filename**: `p6.html`
- **Description**: 視覺化呈現回測結果。包含資金增長曲線、最大回撤 (MDD)、獲利因子、夏普比率、勝率及連虧次數統計。支援匯出專業報表供策略修正參考。
- **Outgoing Connections**:
  - links to -> `p1` (量化交易總控台 (Main Dashboard))
  - links to -> `p5` (高擬真回測引擎 (Backtesting Engine))
  - links to -> `p6` (績效分析報告 (Performance Report))
  - links to -> `p3` (策略開發與熱編譯 (Strategy Editor))
  - links to -> `p7` (最佳化引擎與樣本外測試 (Optimization Lab))
  - links to -> `p8` (AI 決策流水線監控 (AI Decision Pipeline))
  - links to -> `p9` (系統設定與 API 配置 (System Settings))

### [p7] 最佳化引擎與樣本外測試 (Optimization Lab)
- **Filename**: `p7.html`
- **Description**: 利用遺傳演算法 (Genetic Algorithm) 進行參數尋優。由 Gemini AI 自動執行最近 30 天數據的參數挑選，並進行 Walk-Forward 樣本外測試，防止過度擬合。
- **Outgoing Connections**:
  - links to -> `p1` (量化交易總控台 (Main Dashboard))
  - links to -> `p2` (數據管理中心 (QuoteManager))
  - links to -> `p3` (策略開發與熱編譯 (Strategy Editor))
  - links to -> `p5` (高擬真回測引擎 (Backtesting Engine))
  - links to -> `p7` (最佳化引擎與樣本外測試 (Optimization Lab))
  - links to -> `p6` (績效分析報告 (Performance Report))
  - links to -> `p8` (AI 決策流水線監控 (AI Decision Pipeline))
  - links to -> `p4` (部位加總與同步 (Portfolio Aggregator))
  - links to -> `p9` (系統設定與 API 配置 (System Settings))

### [p8] AI 決策流水線監控 (AI Decision Pipeline)
- **Filename**: `p8.html`
- **Description**: 監控每 5 分鐘觸發一次的 4-LLM 協作流程。顯示 Groq (行情)、GPT-4o (新聞)、Gemini (風控) 至 Llama-405B (終極決策) 的推論日誌與決策權重。
- **Outgoing Connections**:
  - links to -> `p1` (量化交易總控台 (Main Dashboard))
  - links to -> `p9` (系統設定與 API 配置 (System Settings))
  - links to -> `p3` (策略開發與熱編譯 (Strategy Editor))
  - links to -> `p8` (AI 決策流水線監控 (AI Decision Pipeline))
  - links to -> `p4` (部位加總與同步 (Portfolio Aggregator))
  - links to -> `p5` (高擬真回測引擎 (Backtesting Engine))

### [p9] 系統設定與 API 配置 (System Settings)
- **Filename**: `p9.html`
- **Description**: 配置 unitradeAPI 金鑰、Llama/GPT 各大模型 API Key、全局風險上限設定以及系統備份還原選項。
- **Outgoing Connections**:
  - links to -> `p1` (量化交易總控台 (Main Dashboard))
  - links to -> `p2` (數據管理中心 (QuoteManager))
  - links to -> `p4` (部位加總與同步 (Portfolio Aggregator))
  - links to -> `p3` (策略開發與熱編譯 (Strategy Editor))
  - links to -> `p5` (高擬真回測引擎 (Backtesting Engine))
  - links to -> `p7` (最佳化引擎與樣本外測試 (Optimization Lab))
  - links to -> `p8` (AI 決策流水線監控 (AI Decision Pipeline))
  - links to -> `p6` (績效分析報告 (Performance Report))
  - links to -> `p9` (系統設定與 API 配置 (System Settings))

### [p2708] 系統登入
- **Filename**: `p2708.html`
- **Description**: 系統登入
- **Outgoing Connections**:
  - links to -> `p1` (量化交易總控台 (Main Dashboard))

